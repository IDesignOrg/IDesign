<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>Star Rating</title>
	<style>
		.star-rating {
			direction: rtl;
			font-size: 2em;
			unicode-bidi: bidi-override;
			display: inline-flex;
		}

		.star-rating input {
			display: none;
		}

		.star-rating label {
			color: #ccc;
			cursor: pointer;
			position: relative;
		}

		.star-rating .full {
			color: #f5b301;
		}

		.star-rating .half {
			position: absolute;
			overflow: hidden;
			color: #f5b301;
		}

		.star-rating .half::before {
			content: '★';
			position: absolute;
			left: 0;
			color: #f5b301;
			width: 50%;
		}

		.star-rating input:checked~label.full,
		.star-rating input:checked~label.half::before {
			color: #f5b301;
		}

		.star-rating input:hover~label.full,
		.star-rating input:hover~label.half::before,
		.star-rating label.full:hover,
		.star-rating label.full:hover~label.full,
		.star-rating label.full:hover~label.half::before,
		.star-rating label.half:hover::before,
		.star-rating label.half:hover~label.full,
		.star-rating label.half:hover~label.half::before {
			color: #f5b301;
		}
	</style>
</head>

<body>
	<form id="shopReview" action="/shopReview" method="post" enctype="multipart/form-data">
		<!--별점 관련-->
		<div class="star-rating">
			<input type="radio" id="star5" name="rating" value="5" />
			<label for="star5" class="full" title="5 stars">★</label>

			<input type="radio" id="star4.5" name="rating" value="4.5" />
			<label for="star4.5" class="half" title="4.5 stars">★</label>

			<input type="radio" id="star4" name="rating" value="4" />
			<label for="star4" class="full" title="4 stars">★</label>

			<input type="radio" id="star3.5" name="rating" value="3.5" />
			<label for="star3.5" class="half" title="3.5 stars">★</label>

			<input type="radio" id="star3" name="rating" value="3" />
			<label for="star3" class="full" title="3 stars">★</label>

			<input type="radio" id="star2.5" name="rating" value="2.5" />
			<label for="star2.5" class="half" title="2.5 stars">★</label>

			<input type="radio" id="star2" name="rating" value="2" />
			<label for="star2" class="full" title="2 stars">★</label>

			<input type="radio" id="star1.5" name="rating" value="1.5" />
			<label for="star1.5" class="half" title="1.5 stars">★</label>

			<input type="radio" id="star1" name="rating" value="1" />
			<label for="star1" class="full" title="1 star">★</label>

			<input type="radio" id="star0.5" name="rating" value="0.5" />
			<label for="star0.5" class="half" title="0.5 stars">★</label>
		</div>
		<div class="shopReviewContent">
			<textarea placeholder="상품 설명" id="product-description" name="shopContent" required></textarea>
		</div>
		<div class="product-description">
			<input type="file" id="description-image-upload" name="descriptionImages" accept="image/*" multiple>
			<div id="description-images">
				<img src="https://via.placeholder.com/700x400" alt="상품 설명 이미지">
			</div>
		</div>
		<button type="submit">리뷰작성</button>
	</form>

	<script>
		// 페이지 로드 후 실행될 함수
		window.onload = function () {
			// 설명 이미지 업로드 핸들러
			document.getElementById('description-image-upload').addEventListener('change', function (event) {
				const files = event.target.files;
				const imagesDiv = document.getElementById('description-images');
				imagesDiv.innerHTML = ''; // 기존 이미지 초기화

				// 파일을 읽어서 이미지로 표시
				Array.from(files).forEach(file => {
					const reader = new FileReader();
					reader.onload = function (e) {
						const img = document.createElement('img');
						img.src = e.target.result;
						img.alt = '상품 설명 이미지';
						img.draggable = true; // 드래그 가능하도록 설정
						imagesDiv.appendChild(img);
					};
					reader.readAsDataURL(file);
				});
			});

			// 드래그 앤 드롭 이벤트 핸들러
			document.getElementById('description-images').addEventListener('dragstart', function (event) {
				if (event.target.tagName === 'IMG') {
					event.dataTransfer.setData('text/plain', event.target.src);
				}
			});

			document.getElementById('description-images').addEventListener('dragover', function (event) {
				event.preventDefault();
			});

			document.getElementById('description-images').addEventListener('drop', function (event) {
				event.preventDefault();
				const data = event.dataTransfer.getData('text/plain');
				const target = event.target;
				if (target.tagName === 'IMG') {
					const draggedImg = document.querySelector(`img[src="${data}"]`);
					const targetSrc = target.src;
					target.src = draggedImg.src;
					draggedImg.src = targetSrc;
				}
			});
		};
	</script>
</body>

</html>